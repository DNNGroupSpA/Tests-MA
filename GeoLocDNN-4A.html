<!DOCTYPE html>
<html>
  <head>
    <style>
      #map {
        height: 400px;
        width: 100%;
       }
    </style>
  </head>
  <body>
    <h3>Marcar Posici&oacute;n</h3>
	<p>Presiona el bot&oacute;n "MARCAR", para obtener tu posici&oacute;n actual y se&ntilde;alizarla en el mapa.</p>

	<button onclick="getLocation()">MARCAR</button>

	<p id="demo"></p>   

	<div id="map"></div>
    
    <script>

		var x = document.getElementById("demo");
//		var pos = {lat: -33.4362465, lng: -70.5789929};
		var pos = {lat: -34.397, lng: 150.644};
		
		function getLocation() {
        	if (navigator.geolocation) {
            	navigator.geolocation.getCurrentPosition(showPosition);
        	} else { 
            	x.innerHTML = "Geolocation is not supported by this browser.";
        	}
     	}
     	
		function showPosition(position) {
    		x.innerHTML = "Lat: " + position.coords.latitude + "<br />" + "Lon: " + position.coords.longitude;
			pos = {
				lat: position.coords.latitude,
				lng: position.coords.longitude
            };
			initMap();
			return pos;
		}

		function initMap() {
//        	var pos = {lat: -33.4362465, lng: -70.5789929};
        	var map = new

			google.maps.Map(document.getElementById('map'), {
          		zoom: 17,
          		center: pos
			});

			var marker = new google.maps.Marker({
				position: pos,
				map: map
			});
		}
		
    </script>
    
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCuZ_wyvvstYngRCeGlL2rEBgY0MAP_Qq4&callback=initMap">
	</script>

  </body>
</html>